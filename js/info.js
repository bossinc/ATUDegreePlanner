function setPlanStatus(e){return e?($("#planStatusContainer").removeClass("alert-error").addClass("alert-success"),$("#planStatusContainer2").removeClass("alert-error").addClass("alert-success"),$("#planStatus").text("Complete!"),$("#planStatus2").text("Complete!")):($("#planStatusContainer").removeClass("alert-success").addClass("alert-error"),$("#planStatusContainer2").removeClass("alert-success").addClass("alert-error"),$("#planStatus").text("Incomplete"),$("#planStatus2").text("Incomplete")),!1}function checkStatus(){var e=new Array;return e[0]="Complete",$(".course").each(function(r){return 255==$(this).prop("sem")?(e[0]="Not Complete",e.push("Not_All_Courses_Placed"),!1):void 0}),$(".badSeason").length>0&&(e.push("Class_In_Wrong_Season"),e[0]="Not Complete"),$(".badSequence").length>0&&(e.push("Class_Out_Of_Sequence"),e[0]="Not Complete"),$(".badULE").length>0&&e.push("ULE_Not_Met_Waiver_Required"),$(".badHours").length>0&&e.push("Excess_Hours_Waiver_Required"),void 0==e[1]&&(e[1]="No_Errors"),"Complete"==e[0]?setPlanStatus(!0):"Not Complete"==e[0]&&setPlanStatus(!1),e}function activatePreqReqButtons(e){$("button[name='preReqButton']").mouseenter(function(){var e=$("#"+$(this).prop("value"));e.effect("highlight")}),$("button[name='preReqButton']").click(function(){var e=$("#"+$(this).prop("value"));e.effect("highlight")}),$("button[name='preReqButton']").each(function(){if(e.hasClass("badSequence")){var r=e.prop("sem"),s=$("#"+$(this).prop("value")),t=s.prop("sem");t>=r?($(this).removeClass("btn-default"),$(this).addClass("btn-danger")):($(this).removeClass("btn-danger"),$(this).addClass("btn-success"))}else $(this).removeClass("btn-danger"),$(this).addClass("btn-default")})}function RunLoad(){$("#closeDateBox").click(function(){$("#changeDateBody").collapse("hide")}),$("#closeMessageBox").click(function(){$("#messageBox").hide()}),$("#info_btn").click(function(){var e=$("#"+$(this).prop("value"));$("#infobox").html(e.prop("displayInfo")),activatePreqReqButtons(e)}),$("#prevHours").attr("title","Credit hours"),$("#sem0hide").on("click",function(e){$("#previousCase").hide(0),HiddenSemestersArray.push("#sem0hide"),$("#sembox").append("<button id=prevButt class='btn btn-xs btn-info' >Transfer Credits </button>"),$("#prevButt").on("click",function(e){$("#previousCase").show(0),$(this).remove();var r=jQuery.inArray("#sem0hide",HiddenSemestersArray);HiddenSemestersArray.splice(r,1)})}),addCourses(),$(function(){var e=$(".dropHere");$(".Courses").draggable({drag:function(){$(this).addClass("shadow")},stop:function(){$(this).removeClass("shadow")},revert:"invalid",revertDuration:"200",scroll:"true",delay:"100",containment:"#dragContainer",cursor:"move",stack:".Courses"}),e.droppable({accept:".Courses",drop:function(e,r){courseMove($(this),r.draggable),updateAllCourses()}}),e.not("#sem255").not(".courseCategory").droppable({activeClass:"ui-state-hover",hoverClass:"ui-state-active"})}),$("#menu-newPlan").on("click",function(e){resetButton()}),$("#addSem").on("click",function(e){addSemester(),updateSemesterDates(!1)}),$("#removeSem").on("click",function(e){removeSemester()}),$("#changeSeason").on("change",function(e){resetButton(),theSeason=$("#changeSeason").val(),$("#semYear1").attr("mySeason",theSeason),updateSemesterDates(1)}),$("#changeYear").val(theYear),$("#changeYear").on("change",function(e){theYear=parseInt($("#changeYear").val()),$("#semYear1").attr("myYear",theYear),updateSemesterDates(!1)}),$("#sem0hide").trigger("click"),$(".semYear").each(function(){if("Summer"==$(this).attr("mySeason")){for(var e=$(this).attr("id"),r=e.split(""),s=0;7>s;s++)r.shift();r=r.join(""),r=parseInt(String(r));var t=$("#sem"+r+"hide");t.trigger("click")}}),$("."+justYear+"only").show(0),("13"==justYear||"14"==justYear)&&$(".core").show(0)}function addSemester(){_semesterCounter++;var e="";e="<div id = 'semCase"+_semesterCounter+"' class='semesterCase'><div><div id = 'semYear"+_semesterCounter+"' class='semYear text-center'></div></div>",e=e+"<div class='semester dropHere' id=sem"+_semesterCounter+"><button type='button' class='btn btn-xs pull-left  btn-default' id='sem"+_semesterCounter+"hide' >hide</button></div>",e=e+"<div><div class='text-center' id='semHours"+_semesterCounter+"'>0</div></div></div>",$("#semesterContainer").append(e),$("#semCase"+_semesterCounter).hide(),$("#semCase"+_semesterCounter).show("drop");var r="#sem"+_semesterCounter;$(function(){$(r).droppable({accept:"li",activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(e,s){courseMove($(r),s.draggable),updateAllCourses()}})});var s="#semHours"+_semesterCounter;if(1==_semesterCounter){var t='<a data-toggle="collapse" href="#changeDateBody">';t+=theSeason+" "+theYear+"</a>",$("#semYear1").html(t),$("#semYear1").attr("mySeason",theSeason),$("#semYear1").attr("myYear",theYear)}var o,a="#sem"+_semesterCounter+"hide",n="#semCase"+_semesterCounter,i="semButt"+_semesterCounter,p="#semYear"+_semesterCounter;$(a).on("click",function(e){o=$(p).attr("mySeason")+$(p).attr("myYear"),$(n).hide(0),-1==jQuery.inArray(a,HiddenSemestersArray)&&(HiddenSemestersArray.push(a),$("#sembox").append("<button id="+i+" class='btn btn-xs btn-info' >"+o+" </button>"),$("#"+i).on("click",function(e){$(n).show(0),$(this).remove();var r=jQuery.inArray(a,HiddenSemestersArray);HiddenSemestersArray.splice(r,1)}))}),$(r).prop("kids",0),$(s).attr("title","Credit hours"),$("#semButtonsCase").appendTo("#semesterContainer"),1==_semesterCounter?$("#removeSem").addClass("disabled"):$("#removeSem").removeClass("disabled")}function removeSemester(){if(_semesterCounter>1){for(;$("#semesterContainer > .semesterCase > .semester").last().children(".Courses").length>0;)$("#sem255").append($("#semesterContainer > .semesterCase > .semester >.Courses").last());$("#sem255 >  .Courses").prop("sem",255),$("#sembox > .btn").each(function(){$(this).attr("id")=="semButt"+_semesterCounter&&$(this).hide("drop",function(){$(this).remove()})}),$("#semesterContainer > .semesterCase").last().hide("drop",function(){$(this).remove()}),_semesterCounter--,updateAllCourses()}1==_semesterCounter?$("#removeSem").addClass("disabled"):$("#removeSem").removeClass("disabled")}function div3(e){return e%3==0?!0:!1}function updateSemesterDates(e){var r="";r+=theSeason+" "+theYear,$("#semYear1").html(r),$(".semYear").each(function(){if($(this).is(":hidden")){for(var r=$(this).attr("id"),s=r.split(""),t=0;7>t;t++)s.shift();if(s=s.join(""),s=parseInt(String(s)),s>0){var o=$("#semButt"+s);1==e&&o.trigger("click");$(this).attr("mySeason"),$(this).attr("myYear")}}});for(var s=1;_semesterCounter>=s;s++){var t="#semButt"+s,o="#semYear"+s,a=0;s>1&&("Fall"==theSeason?div3(s)?($(o).attr("mySeason","Summer"),a=theYear+s/3):div3(s+1)?($(o).attr("mySeason","Spring"),a=theYear+(s+1)/3):div3(s+2)&&($(o).attr("mySeason","Fall"),a=theYear+(s-1)/3):"Spring"==theSeason?div3(s)?($(o).attr("mySeason","Fall"),a=theYear+(s/3-1)):div3(s+1)?($(o).attr("mySeason","Summer"),a=theYear+((s+1)/3-1)):div3(s+2)&&($(o).attr("mySeason","Spring"),a=theYear+((s+2)/3-1)):"Summer"==theSeason&&(div3(s)?($(o).attr("mySeason","Spring"),a=theYear+s/3):div3(s+1)?($(o).attr("mySeason","Fall"),a=theYear+((s+1)/3-1)):div3(s+2)&&($(o).attr("mySeason","Summer"),a=theYear+(s-1)/3)),$(o).attr("myYear",a),$(o).html($(o).attr("mySeason")+" "+$(o).attr("myYear")));var n=$(o).attr("mySeason")+""+$(o).attr("myYear")+" <span class=''></span>";$(t).html(n)}$(".semYear").each(function(){for(var r=$(this).attr("id"),s=r.split(""),t=0;7>t;t++)s.shift();s=s.join(""),s=parseInt(String(s));var o=$("#sem"+s+"hide"),a=$("#sem"+s);1==e&&"Summer"==$(this).attr("mySeason")&&0==a.children(".Courses").length&&1!=s&&o.trigger("click")}),updateAllCourses()}function fancyCourseMove(e,r){e=e.prop("id"),r=r.prop("id");var s=$("#"+e),t=$("#"+r);t.css("left",""),t.css("top",""),s.append(t);var o=parseSem(e);t.prop("sem",o)}function courseMove(e,r){e=e.prop("id"),r=r.prop("id");var s=$("#"+e),t=$("#"+r);t.css("left",""),t.css("top",""),s.append(t);var o=parseSem(e);t.prop("sem",o)}function parseSem(e){if(null!=e){var r=e.split("");return r.shift(),r.shift(),r.shift(),r=r.join(""),r=parseInt(String(r))}return 255}function resetButton(){for($(".semester").each(function(){$(this).prop("kids",0)}),$(".Courses").each(function(){$("#catAll").append(this)}),$(".Courses").prop("sem",255);11>_semesterCounter;)addSemester();for(;_semesterCounter>11;)removeSemester();$(".course").each(function(e){var r=$(this);if(null!=r.prop("altClass")){var s=$("#"+r.prop("altClass"));666!=r.prop("sem")&&courseMove($("#sem666"),s)}}),updateAllCourses()}function updateAllCourses(){$("#sem255 >  .Courses").each(function(){$("#catAll").append(this)}),$(".courseCategory >  .Courses").each(function(){$(this).prop("sem",255),$(this).removeClass("badULE"),$(this).removeClass("badSeason"),$(this).removeClass("badSequence"),$("#"+$(this).prop("id")+"redErrorGrid").removeClass("printRed"),"#catEXTRA"==$(this).prop("cat")?$("#catEXTRA").append(this):$("#catAll").append(this)});for(var e=0;_semesterCounter>=e;e++){var r="#sem"+e,s=0;$(r+" > .Courses").each(function(){s+=$(this).prop("hours")});var t="#semHours"+e,o=$("#semYear"+e),a=$("#semCase"+e);a.attr("mySeason",o.attr("mySeason")),a.attr("myYear",o.attr("myYear")),0==s?$(t).text("0"):$(t).text(s),s>9&&"Summer"==$(o).attr("mySeason")?a.addClass("badHours"):s>18?a.addClass("badHours"):a.removeClass("badHours");var r="#sem"+e,n=$(r+" .Courses").length;$(r).prop("kids",n)}$(".semester").not("#sem0").each(function(e){var r=$("#"+$(this).prop("id")+" .Courses").length;r>5?$(this).css("width","182px"):$(this).css("width","96px")}),$(".semester").each(function(e){for(var r=$(this).prop("id"),s=r.split(""),t=0;3>t;t++)s.shift();s=s.join(""),s=parseInt(String(s));var o=$("#sem"+s+"hide");$(this).prop("kids")>0?o.hide(0):o.show(0)}),$(".course").each(function(e){thisCourse=$(this),thisCourse.prop("title",""),255!=thisCourse.prop("sem")&&(checkSequence(thisCourse),1==thisCourse.prop("ULE")&&checkULE(thisCourse),checkSeason(thisCourse))}),colorErrors(),sortCategories(),broadCastAll(),applyPrintClass(),checkStatus()}function broadCastAll(){total_errors=0,broadCastOutOfSequence(),0==total_errors?($("#errorTitle").hide(),$("#displayErrorsBadge").text("")):($("#errorTitle").show(),$("#displayErrorsBadge").html(total_errors))}function applyPrintClass(){$(".course").not(".badSequence, .badSeason").each(function(){$("#"+$(this).prop("id")+"redErrorGrid").removeClass("printRed")}),$(".badSequence, .badSeason").each(function(){$("#"+$(this).prop("id")+"redErrorGrid").addClass("printRed")})}function colorErrors(){var e="#E8000D",r="#FFC82D",s="#00533E",t="#6DC6E7",o="#FFCE00";$(".course").css("background-color",s),$(".course:hover").css("background-color",o),$(".course.ULE").css("background-color",t),$(".badSequence").css("background-color",e),$(".badSeason").css("background-color",e),$(".badULE").css("background-color",r),$(".badSeason.badULE").css("background-color",e),$(".badSeason.badSequence").css("background-color",e),$(".badSequence.badULE").css("background-color",e),$(".badSeason.badSequence.badULE").css("background-color",e),$(".semesterCase").css("background-color","transparent"),$(".badHours").css("background-color",r)}function checkSeason(e){var r="#semYear"+e.prop("sem");"#semYear255"!=r&&"#semYear0"!=r&&("Summer"==$(r).attr("mySeason")&&0==e.prop("summer")?e.addClass("badSeason"):"f"==e.prop("seasonRestrict")&&e.is(":visible")&&"Spring"==$(r).attr("mySeason")?e.addClass("badSeason"):"s"==e.prop("seasonRestrict")&&e.is(":visible")&&"Fall"==$(r).attr("mySeason")?e.addClass("badSeason"):e.removeClass("badSeason"))}function broadCastOutOfSequence(){var e="<b>Pre-requisite errors:</b><br>";$("#errorSequence").html(""),$(".badSequence").length>0&&($(".badSequence").each(function(){total_errors++,e+=$(this).prop("id")+" ",$(this).prop("title",displayPrereqList($(this)))}),$("#errorSequence").html(e))}function checkULE(e){var r=!0;if("COMS_TEST"==e.prop("id"))for(var s=0;s<ULElist.length;s++)$("#"+ULElist[s]).prop("sem")>e.prop("sem")&&666!=$("#"+ULElist[s]).prop("sem")&&(r=!1);else for(var s=0;s<ULElist.length;s++)$("#"+ULElist[s]).prop("sem")>=e.prop("sem")&&666!=$("#"+ULElist[s]).prop("sem")&&(r=!1);0==r&&0!=e.prop("sem")&&255!=e.prop("sem")?e.addClass("badULE"):(e.removeClass("badULE"),e.prop("title",""))}function checkSequence(e){for(var r=0,s=!1,t=0;"end"!=e.prop("Prereqs")[r];){if(t=0,"COMS2104"==e.prop("Prereqs")[r]?0==popup&&($("#prereqModal").modal("show"),popup++):"co"==e.prop("Prereqs")[r]&&(t=1,r++),"or"==e.prop("Prereqs")[r]){var o=!0;for(r++;"endor"!=e.prop("Prereqs")[r];){t=0,"co"==e.prop("Prereqs")[r]&&(t=1,r++);var a=$("#"+e.prop("Prereqs")[r]);e.prop("sem")>a.prop("sem")-t&&(o=!1),1==o?255!=e.prop("sem")&&0!=e.prop("sem")&&e.is(":visible")&&e.addClass("badSequence"):e.removeClass("badSequence"),r++}}var n=$("#"+e.prop("Prereqs")[r]);n.length>0&&(e.prop("sem")<=n.prop("sem")-t&&(s=!0),1==s?255!=e.prop("sem")&&0!=e.prop("sem")&&e.is(":visible")&&e.addClass("badSequence"):e.removeClass("badSequence")),r++}(255==e.prop("sem")||0==e.prop("sem")||e.is(":hidden"))&&e.removeClass("badSequence")}function displayPrereqList(e){var r="";if("end"==e.prop("Prereqs")[0])r="<br> None";else{var s=0;for(r="Missing prereqs: ";"end"!=e.prop("Prereqs")[s];)"co"==e.prop("Prereqs")[s]?(r=r+" \n"+$("#"+e.prop("Prereqs")[++s]).prop("label")+" (coreq) ",s++):($("#"+e.prop("Prereqs")[s]).length>0&&e.prop("sem")<=$("#"+e.prop("Prereqs")[s]).prop("sem")&&(r=r+" \n"+$("#"+e.prop("Prereqs")[s]).prop("label")),s++)}return r}function NewInfoDisplayPrereq(e){var r="<br><b>Prereqs:</b> <br>";if("end"==e.prop("Prereqs")[0])r+="None";else for(var s=e.prop("Prereqs").length,t=0;s-1>t;t++)if($("#"+e.prop("Prereqs")[t]).length>0){var o=$("#"+e.prop("Prereqs")[t]).prop("label"),a=$("#"+e.prop("Prereqs")[t]).prop("id");"co"==e.prop("Prereqs")[t]?(t++,o=$("#"+e.prop("Prereqs")[t]).prop("label"),a=$("#"+e.prop("Prereqs")[t]).prop("id"),r=r+"<button name='preReqButton' value='"+a+"'type='button' class='btn btn-default btn-xs'> "+o+"(co)</button>"):r=r+"<button name='preReqButton' value='"+a+"'type='button' class='btn btn-default btn-xs'> "+o+"</button>"}return r}function addCourses(){$("#addExtraCourse").click(function(){$("#catEXTRA").append(s);var e=$("#extraCourse"+_extraCourseCounter);drawCourse(e),updateAllCourses(),$(".extraCourse").draggable({drag:function(){$(this).addClass("shadow")},stop:function(){$(this).removeClass("shadow")},revert:"invalid",revertDuration:"200",scroll:"true",delay:"100",containment:"#dragContainer",cursor:"move",stack:".Courses"})});for(var e=0;""!=initialCourseArray[e];e++){var r=initialCourseArray[e],s=" <li class='course Courses' id="+r.name+"></li>";$("#sem666").append(s);var t=$("#"+initialCourseArray[e].name);t.prop("label",r.label),t.prop("hours",parseInt(r.hours)),t.prop("summer",r.summer),t.prop("Prereqs",r.Prereqs.split("|")),t.prop("ULE",r.ULE),t.prop("seasonRestrict",r.seasonRestrict),t.prop("link",r.link);var o="";o+='<div class="btn-group btn-group-xs pull-right">',o+="f"==t.prop("seasonRestrict")?'<button type="button" class="btn btn-danger">Spring</button>':'<button type="button" class="btn btn-success">Spring</button>',o+=1==t.prop("summer")?'<button type="button" class="btn btn-success">Summer</button>':'<button type="button" class="btn btn-danger">Summer</button>',o+="s"==t.prop("seasonRestrict")?'<button type="button" class="btn btn-danger">Fall</button>':'<button type="button" class="btn btn-success">Fall</button>',o+="</div>",t.prop("awesomeSemesterDisplay",o),courseMove($("#sem255"),t)}for(var e=0;""!=initialCourseArray[e];e++){var r=initialCourseArray[e],t=$("#"+initialCourseArray[e].name);updateDisplayInfo(t),t.click(function(){var e=$(this);$("#infobox").html($(this).prop("displayInfo")),activatePreqReqButtons(e),$("button[name='course-btn']").prop("value",$(this).prop("id")),$("#hours_btn").attr("disabled","disabled"),$("#hours_btn").hide()}),drawCourse(t)}updateAllCourses(),sortCategories()}function updateDisplayInfo(e){var r="";if(r+="<div class='row'>",r+="<div class='col-sm-6'>",r+="<strong>",r+=null==e.prop("link")?e.prop("label"):"<a href="+e.prop("link")+' title="Course Info" target="_blank">'+e.prop("label")+"</a>",r+="</strong>",r+="<div>",r+=1==e.prop("hours")?e.prop("hours")+" credit hour":e.prop("hours")+" credit hours",r+="</div>",r+="</div>",r+="<div class='col-sm-6'>",r+=e.prop("awesomeSemesterDisplay"),r+="<div>",r+='<span class="label label-default pull-right">',r+="</span>",r+="</div>",r+="</div>",r+="</div>",r+="</div>",r+="<div class='row'>",r+="<div class='col-sm-12'>",r+="<div>",r+='<span class="label label-default1 pull-left">',0==e.prop("ULE"))r+="Pre-ULE";else if(1==e.prop("ULE")){var s=e.prop("id"),t="#"+String(s)+"_";r+="<a href="+t+' data-toggle="modal" id="popuplink">Click for More Prerequisite Info</a>'}else if(2==e.prop("ULE")){var s=e.prop("id"),t="#"+String(s)+"_";r+="<a href="+t+' data-toggle="modal" id="popuplink">Click for Requirements Information</a>'}r+="</span>",r+=NewInfoDisplayPrereq(e),r+="</div>",r+="</div>",r+="</div>",e.prop("displayInfo",r),updateAllCourses()}function updateExtraDisplayInfo(e){var r="";r+="<div class='row'>",r+="<div class='col-sm-6'>",r+="<strong>",r+=null==e.prop("link")?e.prop("label"):"<a href="+e.prop("link")+' title="Course Info" target="_blank">'+e.prop("label")+"</a>",r+="</strong>",r+="<div>",r+=1==e.prop("hours")?e.prop("hours")+" credit hour":e.prop("hours")+" credit hours",r+="</div>",r+="</div>",r+="</div>",r+="</div>",e.prop("displayInfo",r),updateAllCourses()}function drawCourse(e){e.html("");var r="";r="<span class ='courseFiller2' id = '"+e.attr("id")+"redErrorGrid' style='position:absolute;left:0px;top:0px;'><span class='courseFiller'></span><span class='courseFiller'></span><span class='courseFiller'></span><span class='courseFiller'></span></span>",r+='<p style="line-height:115%">',r+="<b>"+e.prop("label")+"</b>",r+="<span style='float:right'>"+e.prop("hours")+"</span> ",r+="<br>","f"==e.prop("seasonRestrict")?r+=1==e.prop("summer")?"<i>Fall/Sum</i>":"<i>Fall Only</i>":"s"==e.prop("seasonRestrict")?r+=1==e.prop("summer")?"<i>Spr/Sum</i>":"<i>Spring Only</i>":"n"==e.prop("seasonRestrict")&&(r+=1==e.prop("summer")?"<i>Spr/Sum/Fall</i>":"<i>Spr/Fall</i>"),0==e.prop("ULE")&&(ULElist.push(e.prop("id")),e.addClass("ULE")),r+="</p>",e.html(r)}function sortCategories(){function e(e){$(e+" >  .course").not(".altSorted").sortElements(function(e,r){return 0==$(e).prop("ULE")&&$(e).addClass("uleSorted"),0==$(r).prop("ULE")&&$(r).addClass("uleSorted"),$(e).prop("ULE")>$(r).prop("ULE")?1:-1}),$(e+" >  .course").not(".uleSorted").not(".altSorted").sortElements(function(e,r){return $(e).prop("id")>$(r).prop("id")?1:-1}),$(e+" >  .course.uleSorted").sortElements(function(e,r){return $(e).removeClass("uleSorted"),$(r).removeClass("uleSorted"),$(e).prop("id")>$(r).prop("id")?1:-1})}e("#catAll")}var _semesterCounter=0,theSeason="Fall",theYear=2012,HiddenSemestersArray=new Array,ULElist=new Array,popup=0;window.onload=RunLoad;